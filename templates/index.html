<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>视频处理工具</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Video.js CSS -->
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet">
    <!-- 自定义样式 -->
    <link href="/static/css/style.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <!-- 导航选项卡 -->
        <ul class="nav nav-tabs mb-4" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="youtube-tab" data-bs-toggle="tab" data-bs-target="#youtube" type="button">YouTube下载</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="upload-tab" data-bs-toggle="tab" data-bs-target="#upload" type="button">本地上传</button>
            </li>
        </ul>

        <!-- 选项卡内容区域 -->
        <div class="tab-content" id="myTabContent">
            <!-- YouTube下载面板 -->
            <div class="tab-pane fade show active" id="youtube">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">YouTube视频下载</h5>
                        <!-- 视频链接输入区域 -->
                        <div class="input-group mb-3">
                            <input type="text" id="video-url" class="form-control" placeholder="输入YouTube视频链接">
                            <button id="download-btn" class="btn btn-primary">下载</button>
                        </div>
                        <!-- 下载进度条 -->
                        <div id="download-progress" class="progress mb-3 d-none">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"></div>
                        </div>
                        <!-- 下载状态信息 -->
                        <div id="download-status" class="text-muted small"></div>
                        <!-- 转录按钮 -->
                        <button id="youtube-transcribe-btn" class="btn btn-success mt-3 d-none">转录视频</button>
                    </div>
                </div>
            </div>

            <!-- 本地上传面板 -->
            <div class="tab-pane fade" id="upload">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">本地视频上传</h5>
                        <!-- 文件拖放区域 -->
                        <div class="file-drop-area mb-3">
                            <span class="file-message">拖放文件到这里或点击选择文件</span>
                            <input type="file" id="file-upload" class="file-input" accept=".mp4">
                        </div>
                        <!-- 上传按钮 -->
                        <button id="upload-btn" class="btn btn-primary" disabled>上传</button>
                        <!-- 转录按钮 -->
                        <button id="upload-transcribe-btn" class="btn btn-success mt-3 d-none">转录视频</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 视频播放器容器 -->
        <div class="video-container mt-4 d-none">
            <video id="video-player" class="video-js vjs-big-play-centered">
                <p class="vjs-no-js">请启用JavaScript以查看视频</p>
            </video>
        </div>

        <!-- 转录结果显示区域 -->
        <div class="card mt-4 d-none" id="transcription-container">
            <div class="card-body">
                <h5 class="card-title">转录结果</h5>
                <textarea id="transcription-text" class="form-control" rows="10" readonly></textarea>
            </div>
        </div>

        <!-- 在转录结果容器之前添加历史记录区域 -->
        <div class="history-container mt-4">
            <h2 class="section-title">
                <i class="fas fa-history"></i> 最近处理
            </h2>
            
            <div class="history-grid">
                <!-- 示例卡片 - 保持不变 -->
                <div class="history-card example-card">
                    <div class="history-card-header">
                        <span class="source-badge youtube">YouTube</span>
                        <span class="process-time">2024-01-20</span>
                    </div>
                    <div class="history-card-body">
                        <h3 class="video-title">示例视频标题</h3>
                        <p class="text-preview">这是转写的文本预览内容...</p>
                    </div>
                    <div class="history-card-footer">
                        <span class="video-duration"><i class="far fa-clock"></i> 3:45</span>
                        <button class="btn btn-sm btn-primary view-btn">
                            <i class="fas fa-play"></i> 查看
                        </button>
                    </div>
                </div>
                
                <!-- 实际历史记录将被动态添加到这里 -->
                <div id="history-records"></div>
            </div>
        </div>

        <!-- 状态信息提示区域 -->
        <div id="info" class="alert mt-3 d-none"></div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Video.js -->
    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
    <!-- 自定义JavaScript -->
    <script src="/static/js/main.js"></script>
</body>
</html>

